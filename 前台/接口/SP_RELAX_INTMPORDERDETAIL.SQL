/* ------------------------------------
COPYRIGHT (C) 2010-2015 LINKAGE SOFTWARE 
 ALL RIGHTS RESERVED.
<AUTHOR>JIANGBB</AUTHOR>
<CREATEDATE>2015-03-23</CREATEDATE>
<DESCRIPTION>休闲订单前个人信息入临时表</DESCRIPTION>
------------------------------------ */
CREATE OR REPLACE PROCEDURE SP_RELAX_INTMPORDERDETAIL
(
	P_RETCODE        	OUT CHAR, 		--RETURN CODE
	P_RETMSG         	OUT VARCHAR2,   --RETURN MESSAGE
	P_DETAILID			CHAR,
    P_ORDERNO			CHAR,
    P_CARDNO   			CHAR,
	P_CARDCOST			INT,
	P_FUNCFEE			INT,
	P_DISCOUNT			INT,
	P_PACKAGETYPE		CHAR,
	P_CUSTNAME			VARCHAR2,
	P_PAPERTYPE			VARCHAR2,
	P_PAPERNO			VARCHAR2,
	P_CUSTPHONE			VARCHAR2,
	P_ADDRESS			VARCHAR2,
	P_CUSTPOST			VARCHAR2,
	P_REMARK			VARCHAR2,
	P_CUSTSEX			VARCHAR2,
	P_CUSTBIRTH			VARCHAR2,
	P_CUSTEMAIL			VARCHAR2,
	P_ENCUSTNAME		VARCHAR2,
	P_ENPAPERNO			VARCHAR2,
	P_ENCUSTPHONE		VARCHAR2,
	P_ENADDRESS			VARCHAR2
)
AS
    V_TODAY         DATE := SYSDATE;
BEGIN
	
	
	--录入联机休闲年卡订单临时表
	BEGIN	
		INSERT INTO TF_TMP_XXOL_ORDERDETAIL
			(DETAILID		,ORDERNO		,CARDNO			,CARDCOST		,
			FUNCFEE			,PACKAGETYPE	,CUSTNAME		,PAPERTYPE		,
			PAPERNO			,CUSTPHONE		,ADDRESS		,CUSTPOST		,
			ENCRYPTCUSTNAME	,ENCRYPTPAPERNO	,ENCRYPTCUSTPHONE,ENCRYPTADDRESS,
			CUSTSEX			,CUSTBIRTH		,CUSTEMAIL		,DISCOUNT		,
			REMARK			,UPDATETIME)
		VALUES(
			P_DETAILID		,P_ORDERNO		,P_CARDNO		,P_CARDCOST		,
			P_FUNCFEE		,P_PACKAGETYPE	,P_CUSTNAME		,P_PAPERTYPE	,
			P_PAPERNO		,P_CUSTPHONE	,P_ADDRESS		,P_CUSTPOST		,
			P_ENCUSTNAME	,P_ENPAPERNO	,P_ENCUSTPHONE	,P_ENADDRESS	,
			P_CUSTSEX		,P_CUSTBIRTH	,P_CUSTEMAIL	,P_DISCOUNT		,
			P_REMARK		,V_TODAY);
		
		EXCEPTION WHEN OTHERS THEN
        p_retCode := 'I094780003';
		p_retMsg  := '新增联机休闲年卡订单临时表失败' || SQLERRM;
        ROLLBACK; RETURN;
	END;
	
	P_RETCODE	:= '0000000000';
	P_RETMSG  	:= '';
	COMMIT; RETURN;
END;

/
SHOW ERRORS
