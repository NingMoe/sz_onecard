<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <meta content="email=no" name="format-detection">
    <title>地址管理</title>
    <link rel="stylesheet" href="../dest/base.css">
    <script src="../js/flexible.js"></script>
</head>
<body>
  <section class="address">
    <div class="card-box address-item" id="address1"  >
        <input class="checkbox checkbox-default hide" type="radio" name="default" value="1" id="default1">
        <div class="card-box-main" data-id="1">
            <div class="address-item-person"><label class="card-box-label">收货人：</label><span class="address-item-span">欧阳晓晓</span><span class="pull-right">18952135623</span></div>
            <div class="address-item-det"><label class="card-box-label">收货地址：</label><span class="address-item-span">江苏省南京市鼓楼区集慧路18号联创科技大厦A座2楼</span></div>
            <div class="address-item-bar text-right" data-pos="bar">
              <label class="pull-left" for="default1" data-pos="bar">设为默认</label>
              <span class="addr-edit" data-id="2"  data-pos="bar">编辑</span>
              <span class="del-span" data-id="1"  data-pos="bar">删除</span>
            </div>  
        </div>
    </div>   
    <div class="card-box address-item" id="address2"  >
        <input class="checkbox checkbox-default hide" type="radio" name="default" value="2" id="default2">
        <div class="card-box-main" data-id="2">
            <div class="address-item-person"><label class="card-box-label">收货人：</label><span class="address-item-span">欧阳晓晓</span><span class="pull-right">18952135623</span></div>
            <div class="address-item-det"><label class="card-box-label">收货地址：</label><span class="address-item-span">江苏省南京市鼓楼区集慧路18号联创科技大厦A座2楼</span></div>
            <div class="address-item-bar text-right" data-pos="bar">
              <label class="pull-left" for="default2" data-pos="bar">设为默认</label>
              <span class="addr-edit" data-id="2"  data-pos="bar">编辑</span>
              <span class="del-span"data-id="2"  data-pos="bar">删除</span>
            </div>  
        </div>
    </div>  
    <div class="card-box address-item" id="address3" data-id="3">
        <input class="checkbox checkbox-default hide" type="radio" name="default" value="3" id="default3">
        <div class="card-box-main" data-id="2">
            <div class="address-item-person"><label class="card-box-label">收货人：</label><span class="address-item-span">欧阳晓晓</span><span class="pull-right">18952135623</span></div>
            <div class="address-item-det"><label class="card-box-label">收货地址：</label><span class="address-item-span">江苏省南京市鼓楼区集慧路18号联创科技大厦A座2楼</span></div>
            <div class="address-item-bar text-right" data-pos="bar">
              <label class="pull-left" for="default3" data-pos="bar">设为默认</label>
              <span class="addr-edit" data-id="3"  data-pos="bar">编辑</span>
              <span class="del-span"  data-id="3" data-pos="bar">删除</span>
            </div>  
          </div>
    </div>           
  </section>
  <section class="popup transition" id="delPopup">
    <div class="popup-inner">
      <div class="popup-content">确定要删除？</div>
      <div class="popup-action">
        <button class="btn btn-sm popup-cancel round"><span class="icn icn-cancel"></span>取消</button>
        <button class="btn btn-sm do-del round"><span class="icn icn-next"></span>确定</button>
      </div>
    </div>
  </section>
  <section class="popup-mask"></section>
  <footer class="footer"><a class="button go-buy" href="./address.html">新增地址</a></footer>
  <script src="../js/jquery.min.js"> </script>
  <script src="../js/fastclick.js"> </script>
  <script src="../js/base.js"></script>
  <script>
    jQuery(function(){

      $('.checkbox-default').each(function(){
        $main = $(this).siblings('.card-box-main')
        $(this).css('margin-top', $main.height() - $main.find('.address-item-bar').height() - 1 ).show();
      }).on('change', function(){
        console.log($('.checkbox-default:checked').val())
      });

      $('.address-item-bar label').on('click', function(){
        $('#' + $(this).attr('for')).trigger('click')
      });



      $('.card-box-main').on('click', function(event){
        if($(event.target).data('pos') == 'bar'){
          return false;
        }
        location.replace('./order.html?address='+ $(this).data('id'));
      });

      $('.addr-edit').on('click', function(){
        window.location.href='./address.html?id=' + $(this).data('id');
      });



      //删除弹窗
      var pop1 = new Popup($('#delPopup'), {
        maskClose: true
      });
      var delId;

      $('.del-span').on('click', function(){
        delId = $(this).data('id');
        pop1.show();
      });



      //删除
      $('.do-del').on('click', function(){
        $('#address' + delId).remove();
        pop1.hide();
      });
    });
  </script>
</body>
</html>